/* =========================
   NodeItem.css
========================= */

.ef-node {
  box-sizing: border-box; 
  position: absolute;
  
  background: #ffffff;
  border: 1px solid #d9d9d9;
  
  /* ⭐ 修改点 1: 加大圆角，改为 20px (更圆润) */
  border-radius: 20px; 
  
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  
  cursor: grab;
  user-select: none;

  /* ⭐ 修改点 2: 修复拖动卡顿！ */
  /* ❌ 之前是 transition: all 0.2s; 会导致 left/top 也产生动画，造成拖动延迟 */
  /* ✅ 现在只对边框和阴影做动画 */
  transition: box-shadow 0.2s, border-color 0.2s;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 12px;
  overflow: visible; 
}

.ef-node:active {
  cursor: grabbing;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.ef-node.is-selected {
  border-color: #1677ff;
  box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.2);
  z-index: 100;
}

.ef-node.is-connecting {
  border-style: dashed;
  border-color: #1677ff;
}

/* 文字样式 */
.ef-node-label {
  font-size: 14px;
  color: #333;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: center;
  width: 100%;
}

/* 锚点样式 */
.ef-anchor {
  box-sizing: border-box;
  position: absolute;
  width: 10px;
  height: 10px;
  background: #fff;
  border: 2px solid #8c8c8c;
  border-radius: 50%;
  z-index: 10;
  cursor: crosshair;
  transition: transform 0.2s, background-color 0.2s; /* 只对缩放和颜色做动画 */
  opacity: 0; 
}

/* 只有选中或鼠标悬浮时才显示锚点 */
.ef-node:hover .ef-anchor,
.ef-node.is-selected .ef-anchor,
.ef-node.is-connecting .ef-anchor {
  opacity: 1;
  border-color: #1677ff;
}

/* 锚点位置微调 */
.ef-anchor.top { left: 50%; top: -5px; transform: translateX(-50%); }
.ef-anchor.right { top: 50%; right: -5px; transform: translateY(-50%); }
.ef-anchor.bottom { left: 50%; bottom: -5px; transform: translateX(-50%); }
.ef-anchor.left { top: 50%; left: -5px; transform: translateY(-50%); }